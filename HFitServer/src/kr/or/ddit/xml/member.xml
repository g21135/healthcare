<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="member">

	<select id="login" resultClass="memVO" parameterClass="memVO">
		select * from memberVO where mem_id = #mem_id# and mem_pass = #mem_pass#
	</select>

	<select id="getAllMemberList" resultClass="memVO">
		select * from memberVO where mem_id not in('root') order by mem_no
	</select>

	<select id="selectId" resultClass="memVO" parameterClass="memVO">
		select mem_id from memberVO  where mem_id = #mem_id# 
	</select>


	<select id="getSearchMember" resultClass="memVO" parameterClass="memVO">
		select * from memberVO where 1 = 1
		<isNotEmpty prepend="AND" property="mem_id"> mem_id = #mem_id#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="mem_name"> mem_name = #mem_name#
		</isNotEmpty>
		<!-- <isNotEmpty prepend= "AND" property="board_content"> board_content 
			like '%' || #board_content# || '%'</isNotEmpty> -->
		<!-- null, "" 체크 -->
		order by 1
	</select>
	
	<select id="getMemberInfo" resultClass="memVO" parameterClass="memVO"> 
		select * from memberVO where mem_id = #mem_id#
	</select>
	
	<select id="getMember" resultClass="memVO">
		select mem_no, mem_id, mem_name, mem_grade from memberVO where mem_id not in('root')
	</select>

	<update id="updateMember" parameterClass="memVO">
		update memberVO set mem_pass = #mem_pass#, mem_name = #mem_name#,
		mem_bir = #mem_bir#, mem_email = #mem_email#, mem_tel = #mem_tel#, mem_addr = #mem_addr#
		where mem_id = #mem_id#
	</update>

	<delete id="deleteMember" parameterClass="memVO">
		delete memberVO where mem_id = #mem_id#
	</delete>
	
	<!-- 아이디 찾기 -->
	<select  id="searchId" parameterClass="memVO" resultClass="memVO"> 
	select mem_id from membervo where mem_name = #mem_name# and mem_email = #mem_email#
	</select>
	
	<!-- 비번 찾기 -->
	<select id="searchPass" parameterClass="memVO" resultClass="memVO"> 
	select mem_pass from membervo where mem_id like #mem_id# and mem_name = #mem_name# and mem_email = #mem_email#
	</select>
	
	<!-- 비번 변경 아직 안함-->
	<update id="updatePass" parameterClass="memVO">
		update memberVO set mem_pass = #mem_pass# where mem_id = #mem_id#
	</update>
	
	<!-- 회원가입 -->
	<insert id="insertMember" parameterClass="memVO" >
	insert into
	MemberVO(mem_id, mem_pass, mem_name, mem_gender, mem_bir, mem_email, mem_tel, mem_addr, mem_grade, mem_check, mem_no) 
	values(#mem_id#, #mem_pass#, #mem_name#, #mem_gender#, #mem_bir#, #mem_email#, #mem_tel#, #mem_addr#, #mem_grade#, #mem_check#, 
	(select nvl(max(mem_no),0)+1 from MemberVO))
	</insert>
	
	<update id="updateMem" parameterClass="String">
		update membervo set mem_grade = '골드' where mem_id = #mem_id#
	</update>
	
	<delete id="deleteMem" parameterClass="int">
		delete memberVO where mem_no = #mem_no#
	</delete>
	
	<update id="updateMemberAdmin" parameterClass="memVO">
		update memberVO set mem_pass = #mem_pass#, mem_name = #mem_name#,
		mem_email = #mem_email#, mem_tel = #mem_tel#, mem_addr = #mem_addr#
	</update>
	
	


</sqlMap>


