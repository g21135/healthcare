<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">
			
<sqlMap namespace="card">
	<select id="getList" resultClass="cardVO">
		SELECT A.CARD_NUMBER, A.CARD_NAME, A.CARD_CVC, A.CARD_PASS, A.CARD_BALANCE, A.CARD_ALIDITY, A.MEM_BIR FROM CARDVO A, MEMBERVO B WHERE A.MEM_BIR = B.MEM_BIR
	</select>
	
	<select id="getBalance" parameterClass="cardVO" resultClass="cardVO">
		select * from cardVO a , memberVO b where b.mem_bir = #mem_bir# and b.mem_bir = a.mem_bir and card_name = #card_name#
	</select>
	
	<update id="updateBalance" parameterClass="cardVO">
		update cardvo set card_balance = card_balance - #card_balance#
    		where card_name = #card_name# and MEM_BIR = #mem_bir#
	</update>
</sqlMap>