<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="post">
	<select id = "allPostList" resultClass="postVO" parameterClass = "int">
	select * from postVO where board_no=#value#
	</select>
	
	<insert id = "insertPost" parameterClass = "postVO">
	insert into postVO(post_no, board_no, mem_id, post_title, post_content, post_date, post_photo) 
	values((select nvl(max(post_no),0)+1 from postVO), #board_no#, #mem_id# ,#post_title#, #post_content#, sysdate, #post_photo#)
	</insert>
	
	<delete id="deletePost" parameterClass = "int">
	delete from postVO where post_no = #post_no#
	</delete>
	
	<update id="updatePost" parameterClass = "postVO">
	update postVO set 
	post_title = #post_title# , post_content = #post_content# 
	where post_no = #post_no# and mem_id = #mem_id#
	</update>
	
    <select id="selectPostNum" parameterClass="postVO" resultClass="postVO">
	select * from postVO where board_no=#board_no# and post_no = #post_no#
	</select> 
	
	<select id="searchPost" parameterClass="postVO" resultClass="postVO">
	select * from postVO
    where board_no = #board_no# and (post_title like '%'||#post_content#||'%'
    or post_content like '%'||#post_content#||'%')
	</select>
	
	<select id="searchTitle" parameterClass="postVO" resultClass="postVO">
	select * from postVO
    where board_no = #board_no# and post_title like '%'||#post_content#||'%'
	</select>
	
	<select id="searchContent" parameterClass="postVO" resultClass="postVO">
   select * from postVO
    where board_no = #board_no# and  post_content like '%'||#post_content#||'%'
	</select>

</sqlMap>