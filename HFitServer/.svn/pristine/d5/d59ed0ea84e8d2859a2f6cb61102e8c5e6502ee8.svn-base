<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="check">

	<select id="selectAllCav" parameterClass="challApplyVO" resultClass="checkVO">
	select cv.check_no, cv.challapply_no, cv.check_title, cv.check_content, cv.check_photo, cv.check_date, cv.check_approve
	from challapplyvo cav , checkvo cv
	where cav.challapply_no = cv.challapply_no 
	<isNotNull prepend="AND" property="mem_id"> mem_id = #mem_id# </isNotNull>
	and cav.chall_no = #chall_no# 
	</select>
	
	<select id="selectAll" resultClass="checkVO">
	select * from checkvo
	</select>
	
	<select id="selectIdChallNo" parameterClass="challApplyVO" resultClass="checkVO">
	select cv.check_no, cv.challapply_no, cv.check_title, cv.check_content, cv.check_photo, cv.check_date, cv.check_approve
	from challapplyvo cav , checkvo cv, challengevo ch
	where cav.challapply_no = cv.challapply_no and ch.chall_no = cav.chall_no
    and cav.chall_no = #chall_no# and mem_id = #mem_id#
	</select>

	<insert id="insert" parameterClass="checkVO">
		insert into checkvo values (checksequence.nextval,
		#challapply_no#,
		#check_title#,
		#check_content#,
		#check_photo#,
		#check_date#,
		#check_approve#)
	</insert>
	
	<update id="updateCheck" parameterClass="checkVO"> 
	update checkvo set check_approve = #check_approve# where check_no = #check_no#
	</update>
	
</sqlMap>